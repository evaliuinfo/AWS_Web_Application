Description: >
    Eva Liu / AWS 3 Tier Web Application -- web tier 2021 Feb

Parameters:
    EnvironmentName:
        Description: An environment name that will be prefixed
        Type: String

Resources:
  WebTierIAM:
    Properties:
      TemplateURL:
        !Sub: "https://s3.amazonaws.com/${TemplatePath}/iam.yml"
      Parameters:
        S3BucketName: !Ref: S3BucketName
        EnvironmentName: !Ref: EnvironmentName
      Tags:
        - Key: Name
          Value: IAMStack   

  WebTierNonIAMStack:
    DependsOn: WebTierIAM
    Properties:
      TemplateURL:
        !Sub: "https://s3.amazonaws.com/${TemplatePath}/non_iam.yml"
      Parameters:
        S3BucketName: !Ref: S3BucketName
        EnvironmentName: !Ref: EnvironmentName
      Tags:
        - Key: Name
          Value: IAMStack   


